<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport"/>
<title>Jake's CS Notes - Computer Graphics</title>
<link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet"/>
<link href="../css/testStyle.css" rel="stylesheet"/>
<link href="../css/notePageStyle.css" rel="stylesheet"/>
<link href="../css/cs3451Theme.css" id="class-theme-styles" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" rel="stylesheet"/>
</head>
<body>
<script defer="" src="../js/wrapText.js"></script>
<script defer="" src="../js/pageTransitions.js"></script>
<nav class="nav-top">
<ul>
<li class="link-with-slash"><a href="../index.html"><i class="fas fa-home"></i></a></li>
<li><a href="#" id="class-title-link">Computer Graphics</a></li>
</ul>
<ul class="note-links-slider"><li><a class="is-note-link" href="0_firstDay_1_7_19.html">0. First Day</a></li><li><a class="is-note-link" href="1_2dTransformations_1_9_19.html">1. Basic 2D Transformations</a></li><li><a class="is-note-link" href="2_composingTransformations_1_11_19.html">2. Composing 2D Transformations</a></li><li><a class="is-note-link" href="3_matrixStack_1_14_19.html">3. Matrix Stack Basics</a></li><li><a class="is-note-link" href="4_matrixStackCont_1_16_19.html">4. Matrix Stack (cont.)</a></li><li><a class="is-note-link" href="5_projectionBasics_1_18_19.html">5. Projection Basics</a></li><li><a class="is-note-link" href="6_arbitraryRotations_1_23_19.html">6. Arbitrary Rotations</a></li><li><a class="is-note-link" href="7_viewingTransform_1_25_19.html">7. Viewing Transformation</a></li><li><a class="is-note-link" href="8_displaysLines_1_28_19.html">8. Displays and Lines</a></li><li><a class="is-note-link" href="9_introRasterization_1_30_19.html">9. Intro to Rasterization</a></li><li><a class="is-note-link" href="10_hiddenSurfaces_2_1_19.html">10. Hidden Surfaces</a></li><li><a class="is-note-link" href="11_basicShading_2_4_19.html">11. Shading Basics</a></li><li><a class="is-note-link" href="12_basicShadingCont_2_6_19.html">12. Basic Shading (cont.)</a></li><li><a class="is-note-link" href="13_colorPerception_2_8_19.html">13. Color Perception</a></li><li><a class="is-note-link" href="14_colorSpaces_2_11_19.html">14. Color Spaces</a></li><li><a class="is-note-link" href="15_colorRaytracing_2_13_19.html">15. Color Space(cont.) / Intro to Raytracing</a></li><li><a class="is-note-link" href="16_raytracingIntersections_2_15_19.html">16. Raytracing Intersections</a></li><li><a class="is-note-link" href="17_moreRaytracing_2_18_19.html">17. Raytracing (cont.)</a></li><li><a class="is-note-link" href="18_evenMoreRaytracingShadows_2_20_19.html">18. Ray Tracing Shadows &amp; Effects</a></li><li><a class="is-note-link" href="19_raytracingOptimzation_2_22_19.html">19. Raytracing Optimization</a></li><li><a class="is-note-link" href="20_rasterEffects_2_27_19.html">20. Rasterization Effects</a></li><li><a class="is-note-link" href="21_textureMapping_3_1_19.html">21. Texture Mapping</a></li><li><a class="is-note-link" href="22_environmentMaps_3_4_19.html">22. Reflections and Environment Maps</a></li><li><a class="is-note-link" href="23_bumpMapsGPU_3_6_19.html">23. Bump Maps and GPUs</a></li><li><a class="is-note-link" href="24_introGLSLShaders_3_8_19.html">24. Introduction to GLSL/Shaders</a></li><li><a class="is-note-link" href="25_moreGLSLShaders_3_11_19.html">25. More GLSL Shaders</a></li><li><a class="is-note-link" href="26_polyhedraOperations_3_13_19.html">26. Polyhedra Operations</a></li><li><a class="is-note-link" href="27_cornerPolyhedra_3_15_19.html">27. Corner Polyhedra Representation</a></li><li><a class="is-note-link" href="28_bezierCurves_3_25_19.html">28. Bezier Curves</a></li><li><a class="is-note-link" href="29_moreBezierCurves_3_27_19.html">29. Bezier Curves (cont.)</a></li><li><a class="is-note-link" href="30_3dSurfaces_3_29_19.html">30. 3D Surfaces</a></li><li><a class="is-note-link" href="31_bezierPatchSubdivision_4_1_19.html">31. Bezier Patches / Subdivision</a></li><li class="active-note-page"><a class="is-note-link" href="32_catmullClaark_4_3_19.html">32. Catmull</a></li><li><a class="is-note-link" href="33_platonicSolids_4_5_19.html">33. Platonic Solids</a></li><li><a class="is-note-link" href="34_fractlas_4_8_19.html">34. Fractals</a></li><li><a class="is-note-link" href="35_volumeRendering_4_10_19.html">35. Volume Rendering</a></li><li><a class="is-note-link" href="36_moreVolumeRendering_4_12_19.html">36. Volume Rendering (cont.)</a></li><li><a class="is-note-link" href="37_fluidSimulation_4_15_19.html">37. Fluid Simulation</a></li><li><a class="is-note-link" href="38_virtualReality_4_17_19.html">38. Virtual Reality</a></li><li><a class="is-note-link" href="39_gameRendering_4_19_19.html">39. Game Rendering</a></li><li><a class="is-note-link" href="40_proceduralContent_4_22_19.html">40. Procedural Content Generation</a></li></ul>
</nav>
<main>
<a class="side-link is-note-link" href="31_bezierPatchSubdivision_4_1_19.html"></a>
<article>
<!-- Actual note text goes into 'pre' -->
<pre id="text-width-ruler"></pre>
<pre class="main-note-text">//****************************************************************************//
//************ Catmull-Clark Subdivision- April 3rd, 2019 *******************//
//**************************************************************************//

- We're starting off today's lecture with a video - "Geri's Game," from Pixar wayyyy back in 1997
    - Besides being enjoyable, this is the first film Pixar ever did with sudvidision surfaces (and if you look at the "Executive Producers" in the credits, Edwin Catmull is right there!)
        - If you look at the original mesh for Geri, his face is mostly made up of quadrilaterals, but with a few triangles here and there
    - How do you end up with creases in "smooth" subdivided surfaces? Tony DeRose figured out a way to do it in this movie with Geri's wrinkles, so there must be a way!
--------------------------------------------------------------------

- If Pixar uses Catmull-Clark subdivision, then it should be good enough for us - so let's look at it!
    - CATMULL-CLARK subdivision is C2 ALMOST everywhere, and is for surfaces made up of mostly quadrilaterals
        - To subdivide this, for all the polygons in the mesh, we'll first add a new vertex at the middle of the whole polygon AND one to each edge of the polygon, and then connect the edge vertices to the center vertex

                ---------       ----*----
                |       |       |       |
                |       | =&gt;    *   *   *   =&gt; 
                |       |       |       |
                ---------       ----*----


                - Notice that this will turn triangles into quadrilaterals, giving us an all-quad surface after the first subdivision
            - More mathematically, if we have a quadrilateral with original vertices V1 to V4, then:
                - The new center vertex, V, will have position:

                        V = 1/4 * (V1 + V2 + V3 + V4)

                    - For a polygon with "K" vertices, the center vertex in general will be:

                        V = 1/k * (V1 + ... + Vk)

                    - Once again, notice that this is a convex combination!
                - For the vertices on an edge, this is a little bit more tricky
                    - In the typical case of two quads that share an edge, the new point on the line the polygons share will be:

                            v = 1/16(v1 + v2 + v3 + v4) + 3/8(v5 + v6)

                        - Where the 1/16 vertices are the ones that don't form the edge in question, and the other are the two "line segment" vertices
                    - MORE generally, for 2 polygons of any number of sides the weight will be an even 1/4 for the 2 vertices forming the line segment and 1/4 for the 2 polygon's central vertices
        - After adding these new vertices, though, we need to move the old vertices to actually smooth the surface - how do we do that?
            - Well, the math is a little bit messy, but let's say that "ei" are the new "edge vertices" on the mesh and "fi" are the new center vertices
                - In that case, we'll say the constant points E and F are:

                        E = 1/k (e1 + ... + ek)
                        F = 1/k (f1 + ... + fk)

                    - THEN, for a given original vertex "v", its new position will be:

                            v' = E/k + F/k + v*(k-2)/k

    - With that calculated, how smooth will this Catmull-Clark surface be?
        - As we said, MOST points will have C2 continuity, and will have a valence of 4 (i.e. they'll be quads)
            - ...where will it be C1, then? Only at the "extraordinary vertices" of the surface

- Okay, that's Catmull-Clark subdivision in general, but most surfaces aren't perfectly smooth - they have creases and sharp edges on them (e.g. the edge of an otherwise-smooth desk)! How can we replicate that with subdivision?
    - To do this, we can "tag"/label certain edges of the polygon to be SHARP
        - If a new vertex is being created, we'll ONLY form a new point on that edge using this formula:

                V = 1/2(v1 + v2)

            - Where v1/v2 are the vertices making up the sharp edge's line segment
                - This way, the new points will only be on the line, and won't change that outline!
    - If an old vertex is between 2 sharp edges, then, we'll change the formula for its new position to be:

            v' = (6v + v1 + v2)/8

        - Where v1/v2 are the adjacent vertices to "v" along the sharp edge
            - This means that "v" is only allowed to slide along the existing sharp edge - again, not disturbing the outline!
    - This doesn't *quite* cover all the cases for sharp edges (what if there are 3 sharp edges leading to a vertex? What about vertices at the end of a sharp edge?), but it should give you the general idea

- Sometimes, we might also want SEMI-SHARP EDGES: cases where we don't want a knife-sharp edge, but we DO want it to hold its shape in some way
    - For these, basically, we want to have a sharpness "parameter" for a given edge, where "S=0" doesn't do any sharpening, "S=1" is a little bit sharp, "S=2" is more sharp, and so one, up until "S=infinity" (perfectly sharp)
        - The rule for this is actually surprisingly simple: we'll use the "sharp" subdivision rules on a vertex "S" times, and then apply our smoothing rules once
            - This adds a bunch of polygons without changing the edge's shape, then tries to smooth those now-smaller polygons (which'll result in a more constrained smoothing)

- Now, we'll be covering platonic solids on Friday, but before we get to that we NEED to talk about regular polygons
    - A REGULAR POLYGON is one that is convex, has all sides equal-length, and where all angles within the polygon are the same
        - Common examples of these are equilateral triangles, squares, regular pentagons/hexagons/septagons/octagons/etc.
            - "Poor Heptagon - we can't agree on a name for 7-sided shapes"
            - Years ago, Professor Turk thought that Heptagons just didn't exist out "in the wild," and then one day in CVS he found a pill container with one side for every day of the week - "so I had to buy it!"
        - What about a pentagram? It has equal angles and equal sides, but it's NOT convex!

- As it turns out, you can tile your floor with equilateral triangles, squares, and hexagons - but what about the rest? We'll get to that on Friday - adios!</pre>
</article>
<a class="side-link is-note-link" href="33_platonicSolids_4_5_19.html"></a>
</main>
</body>
</html>